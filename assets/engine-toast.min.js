(()=>{var e={845:e=>{self,e.exports=(()=>{"use strict";var e={};return((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isArmadaLoaded=void 0,t.isArmadaLoaded=e=>{var t,i;const r=!0===(null===(i=null===(t=window.eight)||void 0===t?void 0:t.armada)||void 0===i?void 0:i.loaded);if(!e)return r;r?e():document.addEventListener("ARMADA:LOADED",e)},t.default=t.isArmadaLoaded})(0,e),e})()}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(845);class t extends HTMLElement{constructor(){super(),this.toastTemplate=this.querySelector("template").content;["handleNotifications","handleAddToCart","handleCartError","handleEmailVerification"].forEach((e=>{this[e]=this[e].bind(this)}))}connectedCallback(){(0,e.isArmadaLoaded)(this.init.bind(this))}init(){this.attachEvents(),window.eight.armada.elementRegistry.register({key:"engine-toast",assetPath:"/assets/engine-toast.min.js"}),window.eight.eventsEngine.emit(`${eight.constants.events["ARMADA:NOTIFICATIONS:LOADED"]}`),window.Shopify.designMode&&setTimeout((()=>this.runTestMode(this.testModeSuccess,this.testModeError)),100)}attachEvents(){document.addEventListener("ARMADA:NOTIFICATIONS:EVENT",this.handleNotifications),document.addEventListener("ARMADA:CART:ADD",this.handleAddToCart),document.addEventListener("ARMADA:CART:ERROR",this.handleCartError),document.addEventListener("ARMADA:FORM:SUBMIT",this.handleEmailVerification)}handleNotifications(e){const{list:t,type:i,id:r}=e.detail;i&&(this.clearAll(i),this.clearErrors(i),r&&(this.addNotification(i,t,r,this.toastTemplate),this.removeNotification(i,r)))}addNotification(e,t,i,r){if("add"!=e)return;const a=t.filter((e=>e.id==i));this.clearAllOnMobile(),this.createNewToast(...a,r)}removeNotification(e,t){if("remove"!=e)return;const i=this.querySelector(`[data-id="${t}"]`);i&&this.removeChild(i)}clearAll(e){if("clear"!=e)return;this.querySelectorAll("toast-item").forEach((e=>{this.removeChild(e)}))}clearErrors(e){if("clear_errors"!=e)return;this.querySelectorAll('[data-armada-selector="toast-error"]').forEach((e=>{this.removeChild(e)}))}clearAllOnMobile(){"sm"==window.eight.getCurrentBreakpoint()&&window.eight.notifications.clearList()}createNewToast(e,t){const i=t.querySelector(`[data-armada-selector="toast-${e.type}"]`).cloneNode(!0);i.setAttribute("notification",JSON.stringify(e)),i.setAttribute("data-id",e.id),this.appendChild(i)}handleAddToCart(e){const{response:t,quantity:i}=e.detail,{items:r}=t;r.length>1?this.handleBulkAddToCart(r.length):this.handleSingleAddToCart(r[0],i)}handleSingleAddToCart(e,t){const i=`${this.showProductCount?t:""} ${t>1?this.itemsAddedMessage:this.itemAddedMessage}`,r=e.selling_plan_allocation?e.selling_plan_allocation.selling_plan.id:"",a=`${e.id}--${r}`;window.eight.notifications.addToList({type:"atc",message:i,data:{cart_item_id:a},dismissible:!0,error:!1})}handleBulkAddToCart(e){const t=`${this.showProductCount?e:""} ${this.itemsAddedMessage}`;window.eight.notifications.addToList({type:"atc",message:t,dismissible:!0,error:!1})}handleCartError(e){const{error:t}=e.detail,i=t.data.message,r=t.data.description;window.eight.notifications.addToList({type:"error",message:i,data:{info:r},dismissible:!1,error:!0})}handleEmailVerification(){const e=this.emailErrorHeader,t=this.emailErrorMessage;window.eight.notifications.addToList({type:"email",message:e,data:{info:t},dismissible:!1,error:!0})}runTestMode(e,t){e&&window.eight.notifications.addToList({type:"form-submit",message:"Success notification",data:{info:"Notification details"},dismissible:!0,error:!1}),t&&window.eight.notifications.addToList({type:"error",message:"Error notification",data:{info:"Notification details"},dismissible:!1,error:!0})}get testModeSuccess(){return"true"===this.getAttribute("data-test-mode-success")}get testModeError(){return"true"===this.getAttribute("data-test-mode-error")}get itemAddedMessage(){return this.getAttribute("data-item-added-message")}get itemsAddedMessage(){return this.getAttribute("data-items-added-message")}get emailErrorMessage(){return this.getAttribute("data-email-error-message")}get emailErrorHeader(){return this.getAttribute("data-email-error-header")}get showProductCount(){return"true"===this.getAttribute("data-show-product-count")}detachEvents(){document.removeEventListener("ARMADA:NOTIFICATIONS:EVENT",this.handleNotifications),document.removeEventListener("ARMADA:CART:ADD",this.handleAddToCart),document.removeEventListener("ARMADA:CART:ERROR",this.handleCartError),document.removeEventListener("ARMADA:FORM:SUBMIT",this.handleEmailVerification),document.removeEventListener("click",this.clicked)}disconnectedCallback(){this.detachEvents()}}customElements.define("armada-toast",t)})()})();