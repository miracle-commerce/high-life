(()=>{var t={845:t=>{self,t.exports=(()=>{"use strict";var t={};return((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArmadaLoaded=void 0,e.isArmadaLoaded=t=>{var e,i;const s=!0===(null===(i=null===(e=window.eight)||void 0===e?void 0:e.armada)||void 0===i?void 0:i.loaded);if(!t)return s;s?t():document.addEventListener("ARMADA:LOADED",t)},e.default=e.isArmadaLoaded})(0,t),t})()},8808:t=>{self,t.exports=(()=>{"use strict";var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.removeTrapFocus=e.trapFocus=void 0;const i={};e.trapFocus=(t,e=t)=>{const s=Array.from(t.querySelectorAll("summary, a[href], button:enabled, [tabindex]:not([tabindex^='-']), [draggable], area, input:not([type=hidden]):enabled, select:enabled, textarea:enabled, object, iframe")),a=s[0];let n=s[s.length-1];const r=t.querySelector("details:last-of-type summary");r&&(n=r,t.addEventListener("keypress",(t=>{"ENTER"===t.code.toUpperCase()&&(t.target==r?r.toggleAttribute("data-expanded"):r.removeAttribute("data-expanded"),n=void 0!==r.dataset.expanded?s[s.length-1]:r)}))),i.focusin=e=>{e.target!==t&&e.target!==n&&e.target!==a&&"radio"!==e.target.type||document.addEventListener("keydown",i.keydown)},i.focusout=function(){document.removeEventListener("keydown",i.keydown)},i.keydown=function(e){"TAB"===e.code.toUpperCase()&&((e.target===n&&!e.shiftKey||"radio"===e.target.type&&!e.shiftKey)&&(e.preventDefault(),a.focus()),e.target!==t&&e.target!==a||!e.shiftKey||(e.preventDefault(),n.focus()))},document.addEventListener("focusout",i.focusout),document.addEventListener("focusin",i.focusin),e.focus()},e.removeTrapFocus=(t=null)=>{document.removeEventListener("focusin",i.focusin),document.removeEventListener("focusout",i.focusout),document.removeEventListener("keydown",i.keydown),t&&t.focus()}})(),t})()}},e={};function i(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=i(8808),e=i(845);class s extends HTMLElement{constructor(){super(),this.heading=this.querySelector('[data-armada-selector="toast-heading"]'),this.infoContainer=this.querySelector('[data-armada-selector="toast-info"]'),this.htmlContainer=this.querySelector('[data-armada-selector="toast-html-container"]'),this.closeButton=this.querySelector('[data-armada-selector="toast-close"]'),this.cartItemContainer=this.querySelector('[data-armada-selector="toast-cart-item"]'),this.cartTypePage=document.querySelector("body").getAttribute("data-armada-cart-type-page"),(0,e.isArmadaLoaded)(this.init.bind(this))}attachEvents(){this.isDismissible&&(this.addEventListener("mouseenter",(()=>this.pauseTimer())),this.addEventListener("keydown",(()=>this.pauseTimer())),this.addEventListener("mouseleave",(()=>this.resumeTimer()))),this.closeButton.addEventListener("click",(()=>this.removeToast(this.id)))}init(){this.handleMessage(this.message,this.heading),this.handleInfo(this.info,this.infoContainer),this.handleHtml(this.html,this.htmlContainer),this.handleDisplay(this.type,this.cartItemId,this.cartItemContainer),window.eight.armada.elementRegistry.register({key:"component-toast-item",assetPath:"/assets/component-toast-item.min.js"})}handleMessage(t,e){t&&(e.textContent=t,this.setAttribute("aria-label",t))}handleInfo(t,e){t&&(e.innerHTML=t,e.classList.add("mt-l"))}handleHtml(t,e){t&&(e.innerHTML=t)}handleDisplay(t,e,i){"atc"==t&&this.cartTypePage||("atc"==t&&e&&"sm"!=window.eight.getCurrentBreakpoint()?this.handleAtcContent(e,i):this.displayToast())}handleAtcContent(t,e){const i=`[data-armada-selector="toast-cart-item--${t}"]`;window.eight.sectionsEngine.sectionRenderingEngine.fetchSection("?",["ship-toast-cart-item"],[e],[i],(()=>this.displayToast()))}displayToast(){this.classList.remove("invisible"),(0,t.trapFocus)(this,this.closeButton),this.initiateDismissible(),this.attachEvents(),this.parentElement.scrollTop=0,this.slideInToast(),setTimeout((()=>this.animateContent()),200)}slideInToast(){this.style.transform="translateY(0)"}animateContent(){window.eight.eventsEngine.namedEvents.animate(this.querySelector('[data-armada-animation="grid"]'))}initiateDismissible(){this.isDismissible&&(this.remainingTime=this.duration,this.animateProgressBar(),this.setTimer())}animateProgressBar(){this.querySelector("progress-bar").setAttribute("data-progress-play",!0)}pauseProgressBar(){window.eight.eventsEngine.emit(`${window.eight.constants.events["ARMADA:PROGRESSBAR:PAUSE"]}`,{element:this})}resumeProgressBar(){window.eight.eventsEngine.emit(`${window.eight.constants.events["ARMADA:PROGRESSBAR:PLAY"]}`,{element:this})}setTimer(){this.startTime=Date.now(),this.timer=setTimeout((()=>{this.removeToast(this.id)}),this.remainingTime)}pauseTimer(){this.pauseProgressBar(),clearTimeout(this.timer),this.stopTime=Date.now(),this.remainingTime=this.remainingTime-(this.stopTime-this.startTime)}resumeTimer(){this.stopTime&&(this.resumeProgressBar(),this.setTimer())}removeToast(e){window.eight.notifications.removeFromList(e),(0,t.removeTrapFocus)()}disconnectedCallback(){clearTimeout(this.timer)}get notification(){return window.eight.safeJSONParse(this.getAttribute("notification"))}get id(){return this.notification.id}get type(){return this.notification.type}get message(){return this.notification.message}get isDismissible(){return this.notification.dismissible}get duration(){return this.getAttribute("duration")}get info(){return this.notification.data?this.notification.data.info:null}get cartItemId(){return this.notification.data?this.notification.data.cart_item_id:null}get html(){return this.notification.data?this.notification.data.html:null}}customElements.define("toast-item",s)})()})();