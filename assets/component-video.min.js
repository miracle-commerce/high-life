(()=>{var e={845:e=>{self,e.exports=(()=>{"use strict";var e={};return((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isArmadaLoaded=void 0,t.isArmadaLoaded=e=>{var t,i;const o=!0===(null===(i=null===(t=window.eight)||void 0===t?void 0:t.armada)||void 0===i?void 0:i.loaded);if(!e)return o;o?e():document.addEventListener("ARMADA:LOADED",e)},t.default=t.isArmadaLoaded})(0,e),e})()}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(845);class t extends HTMLElement{constructor(){super(),this.button&&(this.poster||this.isHero)&&(this.player=!1,this.ytPlayerReady=this.ytPlayerReady.bind(this),this.ytStateChange=this.ytStateChange.bind(this),this.revealOverlay=this.revealOverlay.bind(this))}connectedCallback(){(0,e.isArmadaLoaded)(this.init.bind(this))}init(){if(this.isHero){const e=(e,t)=>{e[0].isIntersecting&&(this.loadVideo(),t.unobserve(this))};new IntersectionObserver(e,{threshold:0,rootMargin:"0px"}).observe(this)}else this.button.addEventListener("click",this.loadVideo.bind(this)),this.isLoaded(),document.addEventListener("ARMADA:MEDIA:LOADED",this.mediaLoaded.bind(this)),document.addEventListener("ARMADA:MEDIA:CHANGED",this.mediaChanged.bind(this));window.eight.armada.elementRegistry.register({key:"component-video",assetPath:"/assets/component-video.min.js"})}get button(){return this.querySelector('button[data-action="play"]')}get poster(){return!!this.getAttribute("poster")&&this.getAttribute("poster")}get isHero(){return!!this.getAttribute("data-is-hero")&&this.getAttribute("data-is-hero")}get type(){return this.isYouTubeUrl(this.url)?"youtube":this.isVimeoUrl(this.url)?"vimeo":this.isMp4Url(this.url)?"mp4":"invalid"}get url(){return!!this.getAttribute("url")&&this.getAttribute("url")}get autoplay(){return!!this.getAttribute("autoplay")&&this.getAttribute("autoplay")}get isMobile(){return"sm"===window.eight.getCurrentBreakpoint()||"md"===window.eight.getCurrentBreakpoint()}getVideoId(e,t){if("youtube"==e){let e=/(https?:\/\/)?(((m|www)\.)?(youtube(-nocookie)?|youtube.googleapis)\.com.*(v\/|v=|vi=|vi\/|e\/|embed\/|user\/.*\/u\/\d+\/)|youtu\.be\/)([_0-9a-z-]+)/i;return t.match(e)[8]}if("vimeo"==e){let e=/(vimeo(pro)?\.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/;return t.match(e)[3]}if("mp4"==e){return t}}loadVideo(){const e=this.closest("slider-engine");if(!(e&&"true"==e.getAttribute("dragging")||(this.isHero||this.pauseAll(),this.getAttribute("loaded")))){const e=document.createElement("div");e.appendChild(this.querySelector("template").content.firstElementChild.cloneNode(!0));const t=e.querySelector("video, iframe");if(this.appendChild(t).focus(),"invalid"===this.type&&this.handleFallbackImage(t),this.setAttribute("loaded",!0),this.isHero&&"youtube"===this.type&&this.handleYTHero(t),"youtube"!==this.type&&"vimeo"!==this.type||this.isHero)this.isHero&&"mp4"==this.type&&this.handleMP4Hero(t),t.addEventListener("loadeddata",(e=>{const t=e.target.videoWidth/e.target.videoHeight;this.isHero||this.setPadding(t)}));else if(t.onload=()=>{const e=t.getBoundingClientRect(),i=e.width/e.height;this.setPadding(i)},"youtube"===this.type){const e=t.getAttribute("data-video-id");this.loadYouTubeAPI(e)}else"vimeo"===this.type&&this.loadVimeoAPI()}}setPadding(e){const t=1/e*100+"%";this.style.paddingTop=t}pauseAll(){document.querySelectorAll(".js-youtube").forEach((e=>{e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),document.querySelectorAll(".js-vimeo").forEach((e=>{e.contentWindow.postMessage('{"method":"pause"}',"*")})),document.querySelectorAll("video").forEach((e=>e.pause()))}isLoaded(){new MutationObserver(((e,t)=>{e.forEach((e=>{"attributes"===e.type&&"loaded"==e.attributeName&&(window.eight.eventsEngine.emit(`${eight.constants.events["ARMADA:MEDIA:LOADED"]}`),t.disconnect())}))})).observe(this,{attributes:!0})}mediaLoaded(){const e=this.closest('li[data-name="slide"]');e&&this.watchActiveState(e)}watchActiveState(e){let t;t=this.isMobile?"data-slide-active":"data-thumbnail-selected";new MutationObserver((function(e,i){e.forEach((function(e){"attributes"===e.type&&e.attributeName===t&&window.eight.eventsEngine.emit(`${eight.constants.events["ARMADA:MEDIA:CHANGED"]}`)}))})).observe(e,{attributes:!0})}mediaChanged(){const e=this.closest('li[data-name="slide"]');if(e){let t;t=this.isMobile?e.hasAttribute("data-slide-active"):e.getAttribute("data-thumbnail-selected"),!this.isMobile&&"true"==t||this.isMobile&&t?this.setVideoState(this.type,this.getVideoId(this.type,this.url),"play"):(!this.isMobile&&"false"==t||this.isMobile&&!t)&&this.setVideoState(this.type,this.getVideoId(this.type,this.url),"pause")}}setVideoState(e,t,i){if(!e||!t||!i)return;let o,s,a=document.querySelector(`[data-armada-selector="product-media"] [data-video-id="${t}"]`),r=this.querySelector(`[data-video-id="${t}"]`);s=this.isMobile?r:a,s&&(o=this.getVideoAction(e,i,s)),o&&s&&("youtube"==e?s.contentWindow.postMessage(`{"event":"command","func":"${o}","args":""}`,"*"):"vimeo"==e&&s.contentWindow.postMessage(`{"method":"${o}"}`,"*"))}getVideoAction(e,t,i){if(t&&e)if("play"==t){if("youtube"==e)return"playVideo";if("vimeo"==e)return"play";if("mp4"==e){if(!i)return;return i.play()}}else{if("pause"!=t)return;if("youtube"==e)return"pauseVideo";if("vimeo"==e)return"pause";if("mp4"==e){if(!i)return;return i.pause()}}}isYouTubeUrl(e){if(!e)return!1;return!!e.match(/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)||void 0}isVimeoUrl(e){if(!e)return!1;return!!e.match(/vimeo.*(?:\/|clip_id=)([0-9a-z]*)/i)||void 0}isMp4Url(e){return!!e&&(!!e.includes(".mp4")||void 0)}disconnectedCallback(){this.isHero||this.button.removeEventListener("click",this.loadVideo)}loadVimeoAPI(){if(document.querySelector("#vimeo_api"))return;const e=document.createElement("script");e.id="vimeo_api",e.src="https://player.vimeo.com/api/player.js";const[t]=document.getElementsByTagName("script");t.parentNode.insertBefore(e,t);const i=this;e.onload=function(){const e=i.querySelector("iframe");i.player=new Vimeo.Player(e),i.player.on("pause",i.revealOverlay),i.player.on("ended",i.revealOverlay)}}loadYouTubeAPI(e){if(document.querySelector("#youtube_api"))return;const t=document.createElement("script");t.id="youtube_api",t.src="https://www.youtube.com/iframe_api";const[i]=document.getElementsByTagName("script");i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=()=>{this.player=new window.YT.Player("player",{videoId:`${e}`,events:{onReady:this.ytPlayerReady,onStateChange:this.ytStateChange}})}}ytPlayerReady(e){(this.isHero||this.autoplay)&&e.target.playVideo()}ytStateChange(e){2!==e.data&&0!==e.data||this.revealOverlay()}revealOverlay(){this.overlay=this.querySelector('[data-name="video-overlay"]'),this.overlay||(this.appendChild(this.querySelector("template").content.querySelector('[data-name="video-overlay"]').cloneNode(!0)),this.overlay=this.querySelector('[data-name="video-overlay"]'),this.overlay.classList.remove("hidden")),this.overlay.addEventListener("click",this.handleOverlayClick.bind(this))}handleOverlayClick(){const e=this.overlay.parentNode;e&&e.removeChild(this.overlay),this.player&&("youtube"===this.type&&this.player.playVideo(),"vimeo"===this.type&&this.player.play())}handleYTHero(e){const t=e.getAttribute("src").concat("&autoplay=1&mute=1&loop=1&controls=0");e.setAttribute("src",t);if(!("ontouchstart"in document.documentElement&&navigator.userAgent.match(/Mobi/)))return;const i=e.getAttribute("data-video-id");i&&this.loadYouTubeAPI(i)}handleMP4Hero(e){e.muted=!0,e.loop=!0,e.playsinline=!0,e.removeAttribute("controls"),e.play();e.querySelector("source").addEventListener("error",(()=>this.handleFallbackImage(e)))}handleFallbackImage(e){e.style.zIndex=0,this.button.style.display="grid",this.button.firstElementChild.style.visibility="hidden",this.button.firstElementChild.nextElementSibling.style.zIndex=30,this.button.style.cursor="auto"}}window.customElements.define("video-element",t)})()})();