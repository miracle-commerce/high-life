(()=>{var t={845:t=>{self,t.exports=(()=>{"use strict";var t={};return((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArmadaLoaded=void 0,e.isArmadaLoaded=t=>{var e,a;const i=!0===(null===(a=null===(e=window.eight)||void 0===e?void 0:e.armada)||void 0===a?void 0:a.loaded);if(!t)return i;i?t():document.addEventListener("ARMADA:LOADED",t)},e.default=e.isArmadaLoaded})(0,t),t})()}},e={};function a(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,a),n.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=a(845);class e extends HTMLElement{constructor(){super(),this.swatches=this.querySelectorAll('[data-name="swatch-option"] input[type="radio"]'),this.colorSwatchWrapper=this.closest('[data-armada-selector="color-swatch-wrapper"]'),this.colorSwatchContainers=this.querySelectorAll('[data-name="swatch-option"]'),this.labels=this.querySelectorAll('[data-name="swatch-option"] label'),this.prevVariant=null;["init","attachEvents","swatchClickHandler","swatchMouseEnterHandler","swatchMouseLeaveHandler","variantChangeHandler","updateHiddenSwatchCount"].forEach((t=>{this[t]=this[t].bind(this)}))}connectedCallback(){!this.swatches||this.swatches.length<1||!this.getAttribute("product-variants")||(0,t.isArmadaLoaded)(this.init)}init(){this.attachEvents(),this.updateHiddenSwatchCount(),window.eight.armada.elementRegistry.register({key:"color-swatch",assetPath:"/assets/component-color-swatch.min.js"})}attachEvents(){this.swatches.forEach((t=>{t.addEventListener("click",this.swatchClickHandler);t.parentElement.querySelector("label").addEventListener("keyup",(t=>{"Enter"===t.key&&this.swatchClickHandler(t)}))})),this.changeOnHover&&this.labels.forEach((t=>{t.addEventListener("mouseenter",this.swatchMouseEnterHandler),t.addEventListener("mouseleave",this.swatchMouseLeaveHandler)})),document.addEventListener(`${window.eight.constants.events["ARMADA:VARIANT:CHANGE"]}`,this.variantChangeHandler),window.addEventListener("resize",this.updateHiddenSwatchCount)}getVariant(t){const e=t.target,a="input"===e.tagName.toLowerCase(),i=e.parentElement.querySelector("input");if(!i)return;const r=a?e.value:i.value;return this.identifyVariant(r)}swatchClickHandler(t){const e=this.getVariant(t);if(this.imgAspectRatioIsNatural){const t=document.querySelector(`[data-armada-product*="${e.id}"]`);t&&(t.style.height="auto")}window.eight.eventsEngine&&(window.eight.eventsEngine.namedEvents.changeVariant(this.productId,e.id,e,this.scopeId),this.prevVariant=e)}swatchMouseEnterHandler(t){this.prevVariant=this.currentlySelectedVariant;const e=this.getVariant(t);if(this.imgAspectRatioIsNatural){const t=document.querySelector(`[data-armada-product*="${this.prevVariant.id}"]`);t&&(t.style.height=t.offsetHeight+"px")}window.eight.eventsEngine&&window.eight.eventsEngine.namedEvents.changeVariant(this.productId,e.id,e,this.scopeId)}swatchMouseLeaveHandler(){window.eight.eventsEngine.namedEvents.changeVariant(this.productId,this.prevVariant.id,this.prevVariant,this.scopeId)}variantChangeHandler(t){const{productId:e,variant:a,scopeId:i}=t.detail;if(this.productId!=e)return;if(this.scopeId!=i)return;const r=a?.options[this.optionIndex];Array.from(this.inputs).find((t=>0===t.value.localeCompare(r,void 0,{sensitivity:"base"}))).checked=!0}updateHiddenSwatchCount(){if(this.style.maxWidth="unset",this.parentElement.style.maxWidth="unset",!this.colorSwatchWrapper)return;const t=Array.from(this.colorSwatchContainers).filter((t=>0===t.offsetHeight)),e=this.colorSwatchWrapper.querySelector('[data-armada-selector="hidden-swatch-count"]'),a=this.dataset.armadaNoWrap;let i=t.length;const r=this.colorSwatchContainers.length-t.length;if(!e||!a)return;t.forEach((t=>{t.querySelector("label").removeAttribute("tabindex")}));const n=`calc((52px * ${r}) + 4px)`;e.textContent=i<=0?"":`+ ${i}`,i>0&&(e.closest("a").classList.remove("hidden"),e.closest("a").classList.add("flex")),this.style.maxWidth=i<=0?"unset":n,this.parentElement.style.maxWidth=i<=0?"unset":`calc(${n} + 52px)`}identifyVariant(t){return 1==this.variants.length?this.variants[0]:this.variants.find((e=>0===e.options[this.optionIndex].localeCompare(t,void 0,{sensitivity:"base"})))}get inputs(){return!!this.querySelector('[data-name="product-option-radio"]')&&this.querySelectorAll('[data-name="product-option-radio"]')}get scopeId(){const t=this.getAttribute("scope-id");return"string"==typeof t?t:""}get optionIndex(){return!!this.getAttribute("option-index")&&this.getAttribute("option-index")}get productId(){return!!this.getAttribute("product-id")&&Number(this.getAttribute("product-id"))}get variants(){return window.eight.safeJSONParse(this.getAttribute("product-variants"))}get currentlySelectedVariant(){const t=document.querySelector(`[data-swatch-product-id="${this.productId}"]:checked`).value;return this.identifyVariant(t)}get changeOnHover(){return"true"===this.dataset.changeOnHover}get imgAspectRatioIsNatural(){const t=this.getAttribute("natural-img-aspect-ratio");return"true"==t&&t}}window.customElements.define("color-swatch",e)})()})();